<div class="container">
    <mat-horizontal-stepper [linear]="true" #stepper>
        <mat-step>
            <form [formGroup]="FormStep1">
                <div class="form-group">
                    <label>Título do Evento</label>
                    <input id="titulo" type="text" formControlName="titulo" class="form-control" [ngClass]="{
                              'is-valid': FormStep1.get('titulo')?.valid,
                              'is-invalid': FormStep1.get('titulo')?.invalid && (FormStep1.get('titulo')?.touched || FormStep1.get('titulo')?.dirty)
                          }">
                    <ul
                        *ngIf="FormStep1.get('titulo')?.invalid && (FormStep1.get('titulo')?.touched || FormStep1.get('titulo')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>Data do Evento</label>
                    <input type="date" formControlName="data" class="form-control" [ngClass]="{
                              'is-valid': FormStep1.get('data')?.valid,
                              'is-invalid': FormStep1.get('data')?.invalid && (FormStep1.get('data')?.touched || FormStep1.get('data')?.dirty)
                          }">
                    <ul *ngIf="FormStep1.get('data')?.invalid && (FormStep1.get('data')?.touched || FormStep1.get('data')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>Hora de inicio</label>
                    <input type="time" formControlName="time" class="form-control" [ngClass]="{
                              'is-valid': FormStep1.get('time')?.valid,
                              'is-invalid': FormStep1.get('time')?.invalid && (FormStep1.get('time')?.touched || FormStep1.get('time')?.dirty)
                                }">
                    <ul *ngIf="FormStep1.get('time')?.invalid && (FormStep1.get('time')?.touched || FormStep1.get('time')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group imagem">
                    <label>Foto do Evento</label>
                    <ngx-dropzone #dropzoneComponent (change)="onFileSelected($event)" *ngIf="!selectedFile">
                        <button mat-button>
                            <mat-icon>cloud_upload</mat-icon> Arraste e solte ou clique para selecionar uma imagem
                        </button>
                    </ngx-dropzone>
                    <div class="image-preview" *ngIf="imagePreviewUrl">
                        <img [src]="imagePreviewUrl" alt="Foto do Evento" class="preview-image">
                        <button mat-icon-button class="remove-button" *ngIf="imagePreviewUrl" (click)="removeImage()"
                            #tooltip="matTooltip" matTooltip="Trocar a foto" matTooltipPosition="above">
                            x
                        </button>
                    </div>
                </div>
                <div class="d-flex justify-content-end">
                    <button mat-raised-button color="primary" matStepperNext>Próximo</button>
                </div>
            </form>
        </mat-step>

        <!-- Segundo passo -->
        <mat-step>
            <form [formGroup]="FormStep2">
                <div class="form-group">
                    <label>Categoria do Evento</label>
                    <select formControlName="categoria" class="form-control" [ngClass]="{
                              'is-valid': FormStep2.get('categoria')?.valid,
                              'is-invalid': FormStep2.get('categoria')?.invalid && (FormStep2.get('categoria')?.touched || FormStep2.get('categoria')?.dirty)
                          }">
                        <option *ngFor="let item of generos">{{item}}</option>
                    </select>
                    <ul
                        *ngIf="FormStep2.get('categoria')?.invalid && (FormStep2.get('categoria')?.touched || FormStep2.get('categoria')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>Descrição do Evento</label>
                    <textarea formControlName="descricao" class="form-control" [ngClass]="{
                              'is-valid': FormStep2.get('descricao')?.valid,
                              'is-invalid': FormStep2.get('descricao')?.invalid && (FormStep2.get('descricao')?.touched || FormStep2.get('descricao')?.dirty)
                          }"></textarea>
                    <ul
                        *ngIf="FormStep2.get('descricao')?.invalid && (FormStep2.get('descricao')?.touched || FormStep2.get('descricao')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>Valor da Entrada</label>
                    <input type="text" formControlName="valor_entrada" class="form-control" (input)="mascaraMoeda($event)" [ngClass]="{
                              'is-valid': FormStep2.get('valor_entrada')?.valid,
                              'is-invalid': FormStep2.get('valor_entrada')?.invalid && (FormStep2.get('valor_entrada')?.touched || FormStep2.get('valor_entrada')?.dirty)
                          }">
                    <ul
                        *ngIf="FormStep2.get('valor_entrada')?.invalid && (FormStep2.get('valor_entrada')?.touched || FormStep2.get('valor_entrada')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group ">
                    <label>CEP</label>
                    <input type="text" formControlName="cep" class="form-control" maxlength="8"
                        [ngClass]="{
                                'is-valid': FormStep2.get('cep')?.valid,
                                'is-invalid': FormStep2.get('cep')?.invalid && (FormStep2.get('cep')?.touched || FormStep2.get('cep')?.dirty)}">
                    <ul *ngIf="FormStep2.get('cep')?.invalid && (FormStep2.get('cep')?.touched || FormStep2.get('cep')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>Rua</label>
                    <input type="text" formControlName="rua" class="form-control" [ngClass]="{
                              'is-valid': FormStep2.get('rua')?.valid,
                              'is-invalid': FormStep2.get('rua')?.invalid && (FormStep2.get('rua')?.touched || FormStep2.get('rua')?.dirty)
                          }">
                    <ul *ngIf="FormStep2.get('rua')?.invalid && (FormStep2.get('rua')?.touched || FormStep2.get('rua')?.dirty)">
                        <li style="color: red;">Campo obrigatório</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>Número</label>
                    <input type="text" formControlName="numero" class="form-control" [ngClass]="{
                                'is-valid': FormStep2.get('numero')?.valid,
                                'is-invalid': FormStep2.get('numero')?.invalid && (FormStep2.get('numero')?.touched || FormStep2.get('numero')?.dirty)
                        }">
                </div>
                <div class="form-group">
                    <label>Cidade</label>
                    <input type="text" formControlName="cidade" class="form-control" [ngClass]="{
                                'is-valid': FormStep2.get('cidade')?.valid,
                                'is-invalid': FormStep2.get('cidade')?.invalid && (FormStep2.get('cidade')?.touched || FormStep2.get('cidade')?.dirty)
                        }">
                </div>
                <div class="d-flex justify-content-between">
                    <button mat-raised-button color="primary" matStepperPrevious>Voltar</button>
                    <button class="create-button" (click)="editarEvento()">Editar o Evento</button>
                </div>
            </form>
        </mat-step>
    </mat-horizontal-stepper>
</div>